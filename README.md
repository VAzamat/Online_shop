# Проект онлайн-магазина, который демонстрирует категории и входящие в них товары.
## 20.2 Шаблонизация в Django 

Ветки:
  * wip_19.2_django_project_basic_configuration 
    - базовая настройка config/settings.py
    - startapp dealer
    - home.html webpage
  
  * wip_20.1_django_databases_ORM
    - согласно 20.1 Работа с ORM в Django
    - создана база данных и настроена связь с ней
    - созданы модели для Product и Category (см. ниже)
    - настроена админка
    - фикстура (fixture) для сохранения данных в dealer/dumpfile/dump.json и восстановления из него
    - кастомная(консольная) команда fill для заполнения базы данных (dealer/management/commands/fill.py)
  
  * wip_20.2_django_statics_templates
    - согласно 20.2 Шаблонизация в Django
    - Добавлены контроллер и шаблон главной страницы на основе bootstrap:pricing
    - Настроено отображение списка товаров на главной странице в цикле, повторяющиеся части выделены в base.html 
    - Созданы шаблонный фильтр mediapath или шаблонный тег get_media_prefix 



Ключевые слова:
- 20.2 Шаблонизация в Django
- шаблоны
- templates
- django
- шаблонный фильтр
- шаблонный тег
- 20.1 Работа с ORM в Django
- django
- postgres
- фикстура (fixture) 
- кастомная (консольная) команда 


### развертывание из клонированного репозитария https://github.com

для работы с database необходимо создать базу данных online_shop_fk9c0r0x_db и пользователю azamat назначить пароль UseVeryStrongPasswordHere (аналогично тем настройкам, что указаны в файле .env)
```sql
#psql (13.4)
#Введите "help", чтобы получить справку.
postgres=# CREATE ROLE azamat LOGIN PASSWORD 'UseVeryStrongPasswordHere';
postgres=# ALTER USER azamat WITH PASSWORD 'UseVeryStrongPasswordHere';
postgres=# DROP DATABASE  IF EXISTS online_shop_fk9c0r0x_db;
postgres=# CREATE DATABASE online_shop_fk9c0r0x_db OWNER azamat;
```

```bash
# клонируем репозиторий
git clone https://github.com/VAzamat/Online_shop/
# переходим в директорию
cd Online_shop/
# создаем виртуальное окружение
 python3 -m venv env #создаем виртуальное окружение
# активируем виртуальное окружение
 source env/bin/activate #переходим в виртуальное окружение
# редактируем .env (можно скопировать из минимально рабочую конфигурацию из .env.example)
mv .env.example .env
# активируем настройки переменных окружения из текущей директории
source .env
# Устанавливаем зависимости
pip3 install -r requirements.txt
# создание миграций
python manage.py makemigrations
# применение миграций
python manage.py migrate
 
#Для создания суперпользователя используется  команда
python manage.py createsuperuser
#заполнение базы данных через кастомную команду dealer/management/commands/fill.py
python manage.py fill
#запускаем сервер и смотрим результат http://127.0.0.1:8000/
python manage.py runserve
```




### Критерии выполнения заданий
- [x] Добавлены контроллер и шаблон главной страницы на основе bootstrap
- [x] Настроено отображение списка товаров на главной странице в цикле
- [x] Раздельно реализованы базовый шаблон base.html и подшаблоны mainpage.html
- [x] Создан шаблонный фильтр mediapath или шаблонный тег get_media_prefix dealer/templatetags/path_tag_filter.py

### Задание 1

- Создайте новый контроллер и шаблон, которые будут отвечать за отображение отдельной страницы с товаром, на которой необходимо вывести всю информацию о самом товаре.
Примечание: Для создания шаблонов лучше использовать UI kit Bootstrap

> 
>Шаблоны20.2 Задание1 Добавлены контроллер и шаблон главной страницы на основе bootstrap - вариант сайта с "bootstrap:pricing"

### Задание 2
В созданный ранее шаблон для главной страницы выведите список товаров в цикле. Для единообразия выводимых карточек отображаемое описание необходимо обрезать после первых выведенных 100 символов.


> 
>Шаблоны20.2 Задание2 Настроено отображение списка товаров на главной странице в цикле

### Задание 3
Из-за расширения количества шаблонов появляется слишком много повторяющегося кода, поэтому выделите общий (базовый) шаблон, а также подшаблон с главным меню. В подшаблон вынесите общие для всех кодовые части (HTML-код). Не забудьте разместить блок с контентом, куда будут вставляться шаблоны, которые используют подшаблон:

{% block content %}
{% endblock %}
И подключите их к другим шаблонам с помощью
{% extends 'путь к базовому шаблону' %}
Код расширенного шаблона разместите внутри блока с контентом.

Примечание: При необходимости можно выделить больше общих шаблонов.

> 
>Шаблоны20.2 Задание3 Раздельно реализованы базовый шаблон base.html и подшаблоны mainpage.html

### Задание 4

Для выводимого изображения на странице реализуйте шаблонный фильтр или шаблонный тег, который преобразует переданный путь в полный путь для доступа к медиафайлу.

  - создан тег get_media_prefix
  - создан фильтр mediapath

> 
>Шаблоны20.2 Задание4 Созданы шаблонный фильтр mediapath или шаблонный тег get_media_prefix  в dealer/templatetags/path_tag_filter.py

